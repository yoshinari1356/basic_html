<!DOCTYPE html>
<html>
  <head>
    <title>My Drag-and-Drop Example</title>
    <link rel="stylesheet" href="../base.css">
  </head>
  <body>
    <div class="example-parent">
      <div class="example-origin">
        <div
          id="draggable-1"
          class="example-draggable"
          draggable="true"
          ondragstart="onDragStart(event, 'all');"
        >
          draggable all
        </div>
        <div
          id="draggable-1"
          class="example-draggable"
          draggable="true"
          ondragstart="onDragStart(event, 'move');"
        >
          draggable move
        </div>
        <div
          id="draggable-2"
          class="example-draggable"
          draggable="true"
          ondragstart="onDragStart(event, 'copy');"
        >
          draggable copy
        </div>
        <div
          id="draggable-3"
          class="example-draggable"
          draggable="true"
          ondragstart="onDragStart(event, 'copyMove');"
        >
          draggable copyMove
        </div>
        <div
          id="draggable-3"
          class="example-draggable"
          draggable="true"
          ondragstart="onDragStart(event, 'link');"
        >
          draggable link
        </div>
      </div>

      <div
        class="example-dropzone"
        ondragover="onDragOver(event);"
        ondrop="onDrop(event);"
      >
        dropzone
      </div>
      <div
        class="example-dropzone"
        ondragover="onDragOver(event);"
        ondrop="onDrop(event);"
      >
        dropzone
      </div>
      <div
        class="example-dropzone"
        ondragover="onDragOver(event);"
        ondrop="onDrop(event);"
      >
        dropzone
      </div>
      <div
        class="example-dropzone"
        ondragover="onDragOver(event);"
        ondrop="onDrop(event);"
      >
        dropzone
      </div>
    </div>
    <script>
      function onDragStart(event, effectAllowed) {
        // console.log("onDragStart", effectAllowed)
        // ブラウザでドラッグ操作をした際に許可される効果を指定する
        // https://developer.mozilla.org/ja/docs/Web/API/DataTransfer/effectAllowed
        event.dataTransfer.effectAllowed = effectAllowed;
        event.dataTransfer.setData('text/plain', event.target.id);
      }
      function onDragOver(event) {
        console.log("onDragOver")
        event.preventDefault();
      }
      function onDrop(event) {
        console.log("onDrop")
        const id = event
          .dataTransfer
          .getData('text');
        const draggableElement = document.getElementById(id);
        const dropzone = event.target;
        dropzone.appendChild(draggableElement);
        event
          .dataTransfer
          .clearData();
      }
    </script>
    <style>
      .example-parent {
        display: flex;
      }

      .example-origin {
        padding: 10px;
        border: 1px solid;
      }

      .example-draggable {
        border: 1px solid;
        margin: 5px;
        padding: 5px;
      }

      .example-dropzone {
        border: 1px solid;
        flex: 1;
        padding: 10px;
      }
    </style>
  </body>
</html>
